
> planter-plan@0.1.0 test
> vitest --run


[1m[46m RUN [49m[22m [36mv4.0.18 [39m[90m/home/joel/PlanterPlan/PlanterPlan-Alpha/PlanterPlan-Alpha[39m

[90mstdout[2m | src/tests/security/RLS.test.js
[22m[39mRLS Test running against: http://127.0.0.1:54321

 [31m‚ùØ[39m src/tests/security/RLS.test.js [2m([22m[2m0 test[22m[2m)[22m
[90mstdout[2m | src/tests/unit/AuthContext.security.test.jsx[2m > [22m[2mAuthContext Security Fallback[2m > [22m[2mShould default to "viewer" role if supabase.rpc throws error
[22m[39mAuthContext loaded v2 - TIMEOUT 2000ms
AuthContext: checking admin status for user-123
AuthContext loaded v2 - TIMEOUT 2000ms

[90mstderr[2m | src/tests/unit/AuthContext.security.test.jsx[2m > [22m[2mAuthContext Security Fallback[2m > [22m[2mShould default to "viewer" role if supabase.rpc throws error
[22m[39mAuthContext: RPC error { message: [32m'Network Error'[39m, code: [32m'500'[39m }

[90mstdout[2m | src/tests/unit/AuthContext.security.test.jsx[2m > [22m[2mAuthContext Security Fallback[2m > [22m[2mShould default to "viewer" role if supabase.rpc throws error
[22m[39m[AuthContext] setLoading(false)

[90mstdout[2m | src/tests/unit/AuthContext.security.test.jsx[2m > [22m[2mAuthContext Security Fallback[2m > [22m[2mShould default to "viewer" role if supabase.rpc throws error
[22m[39mAuthContext loaded v2 - TIMEOUT 2000ms

[90mstdout[2m | src/tests/unit/AuthContext.security.test.jsx[2m > [22m[2mAuthContext Security Fallback[2m > [22m[2mShould default to "viewer" role if supabase.rpc crashes/throws exception
[22m[39mAuthContext loaded v2 - TIMEOUT 2000ms
AuthContext: checking admin status for user-123
AuthContext loaded v2 - TIMEOUT 2000ms

[90mstderr[2m | src/tests/unit/AuthContext.security.test.jsx[2m > [22m[2mAuthContext Security Fallback[2m > [22m[2mShould default to "viewer" role if supabase.rpc crashes/throws exception
[22m[39mAuthContext: RPC Timed out or crashed Error: Unexpected Crash
    at [90m/home/joel/PlanterPlan/PlanterPlan-Alpha/PlanterPlan-Alpha/[39msrc/tests/unit/AuthContext.security.test.jsx:80:40
    at [90mfile:///home/joel/PlanterPlan/PlanterPlan-Alpha/PlanterPlan-Alpha/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:145:11
    at [90mfile:///home/joel/PlanterPlan/PlanterPlan-Alpha/PlanterPlan-Alpha/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:915:26
    at [90mfile:///home/joel/PlanterPlan/PlanterPlan-Alpha/PlanterPlan-Alpha/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1243:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///home/joel/PlanterPlan/PlanterPlan-Alpha/PlanterPlan-Alpha/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1209:10[90m)[39m
    at [90mfile:///home/joel/PlanterPlan/PlanterPlan-Alpha/PlanterPlan-Alpha/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1653:37
    at Traces.$ [90m(file:///home/joel/PlanterPlan/PlanterPlan-Alpha/PlanterPlan-Alpha/[39mnode_modules/[4mvitest[24m/dist/chunks/traces.CCmnQaNT.js:142:27[90m)[39m
    at trace [90m(file:///home/joel/PlanterPlan/PlanterPlan-Alpha/PlanterPlan-Alpha/[39mnode_modules/[4mvitest[24m/dist/chunks/test.B8ej_ZHS.js:239:21[90m)[39m
    at runTest [90m(file:///home/joel/PlanterPlan/PlanterPlan-Alpha/PlanterPlan-Alpha/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1653:12[90m)[39m

[90mstdout[2m | src/tests/unit/AuthContext.security.test.jsx[2m > [22m[2mAuthContext Security Fallback[2m > [22m[2mShould default to "viewer" role if supabase.rpc crashes/throws exception
[22m[39m[AuthContext] setLoading(false)

[90mstderr[2m | src/tests/unit/AuthContext.security.test.jsx[2m > [22m[2mAuthContext Security Fallback[2m > [22m[2mShould default to "viewer" role if supabase.rpc crashes/throws exception
[22m[39mAuthContext: RPC error Error: Unexpected Crash
    at [90m/home/joel/PlanterPlan/PlanterPlan-Alpha/PlanterPlan-Alpha/[39msrc/tests/unit/AuthContext.security.test.jsx:80:40
    at [90mfile:///home/joel/PlanterPlan/PlanterPlan-Alpha/PlanterPlan-Alpha/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:145:11
    at [90mfile:///home/joel/PlanterPlan/PlanterPlan-Alpha/PlanterPlan-Alpha/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:915:26
    at [90mfile:///home/joel/PlanterPlan/PlanterPlan-Alpha/PlanterPlan-Alpha/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1243:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///home/joel/PlanterPlan/PlanterPlan-Alpha/PlanterPlan-Alpha/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1209:10[90m)[39m
    at [90mfile:///home/joel/PlanterPlan/PlanterPlan-Alpha/PlanterPlan-Alpha/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1653:37
    at Traces.$ [90m(file:///home/joel/PlanterPlan/PlanterPlan-Alpha/PlanterPlan-Alpha/[39mnode_modules/[4mvitest[24m/dist/chunks/traces.CCmnQaNT.js:142:27[90m)[39m
    at trace [90m(file:///home/joel/PlanterPlan/PlanterPlan-Alpha/PlanterPlan-Alpha/[39mnode_modules/[4mvitest[24m/dist/chunks/test.B8ej_ZHS.js:239:21[90m)[39m
    at runTest [90m(file:///home/joel/PlanterPlan/PlanterPlan-Alpha/PlanterPlan-Alpha/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1653:12[90m)[39m

[90mstdout[2m | src/tests/unit/AuthContext.security.test.jsx[2m > [22m[2mAuthContext Security Fallback[2m > [22m[2mShould default to "viewer" role if supabase.rpc crashes/throws exception
[22m[39mAuthContext loaded v2 - TIMEOUT 2000ms

[90mstdout[2m | src/tests/unit/AuthContext.security.test.jsx[2m > [22m[2mAuthContext Security Fallback[2m > [22m[2mShould not default to "owner" on network failure
[22m[39mAuthContext loaded v2 - TIMEOUT 2000ms
AuthContext: checking admin status for user-123
AuthContext loaded v2 - TIMEOUT 2000ms

[90mstderr[2m | src/tests/unit/AuthContext.security.test.jsx[2m > [22m[2mAuthContext Security Fallback[2m > [22m[2mShould not default to "owner" on network failure
[22m[39mAuthContext: RPC error { message: [32m'Failed to fetch'[39m, hinted: [32m'Check connection'[39m }

[90mstdout[2m | src/tests/unit/AuthContext.security.test.jsx[2m > [22m[2mAuthContext Security Fallback[2m > [22m[2mShould not default to "owner" on network failure
[22m[39m[AuthContext] setLoading(false)

[90mstdout[2m | src/tests/unit/AuthContext.security.test.jsx[2m > [22m[2mAuthContext Security Fallback[2m > [22m[2mShould not default to "owner" on network failure
[22m[39mAuthContext loaded v2 - TIMEOUT 2000ms

 [32m‚úì[39m src/tests/unit/AuthContext.security.test.jsx [2m([22m[2m3 tests[22m[2m)[22m[32m 69[2mms[22m[39m
[90mstdout[2m | src/tests/unit/AuthStability.test.jsx[2m > [22m[2mAuthContext Stability[2m > [22m[2mshould not infinite loop when AuthProvider and ViewAsProviderWrapper are combined
[22m[39mAuthContext loaded v2 - TIMEOUT 2000ms

[90mstdout[2m | src/tests/unit/AuthStability.test.jsx[2m > [22m[2mAuthContext Stability[2m > [22m[2mhandles rpc failure without looping
[22m[39mAuthContext loaded v2 - TIMEOUT 2000ms

 [32m‚úì[39m src/tests/unit/TaskDetailsView.test.jsx [2m([22m[2m2 tests[22m[2m)[22m[32m 59[2mms[22m[39m
 [32m‚úì[39m src/tests/unit/AuthStability.test.jsx [2m([22m[2m2 tests[22m[2m)[22m[32m 51[2mms[22m[39m
[90mstderr[2m | src/features/projects/components/PhaseCard.test.jsx[2m > [22m[2mPhaseCard[2m > [22m[2mrenders phase info correctly
[22m[39mReact does not recognize the `whileHover` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `whilehover` instead. If you accidentally passed it from a parent component, remove it from the DOM element.
React does not recognize the `whileTap` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `whiletap` instead. If you accidentally passed it from a parent component, remove it from the DOM element.

 [32m‚úì[39m src/features/dashboard/components/ProjectPipelineBoard.test.jsx [2m([22m[2m2 tests[22m[2m)[22m[32m 128[2mms[22m[39m
 [32m‚úì[39m src/features/tasks/hooks/useTaskBoard.test.jsx [2m([22m[2m5 tests[22m[2m)[22m[32m 63[2mms[22m[39m
 [32m‚úì[39m src/shared/test/health.test.jsx [2m([22m[2m6 tests[22m[2m)[22m[32m 87[2mms[22m[39m
 [32m‚úì[39m src/features/projects/components/PhaseCard.test.jsx [2m([22m[2m3 tests[22m[2m)[22m[33m 302[2mms[22m[39m
 [32m‚úì[39m src/tests/unit/TaskDetailsCrash.test.jsx [2m([22m[2m3 tests[22m[2m)[22m[32m 122[2mms[22m[39m
 [32m‚úì[39m src/tests/integration/task-hierarchy.spec.jsx [2m([22m[2m6 tests[22m[2m)[22m[33m 418[2mms[22m[39m
 [32m‚úì[39m src/features/people/components/PeopleList.test.jsx [2m([22m[2m2 tests[22m[2m)[22m[33m 467[2mms[22m[39m
     [33m[2m‚úì[22m[39m opens add person modal [33m 382[2mms[22m[39m
[90mstderr[2m | src/features/projects/services/projectService.test.js[2m > [22m[2mprojectService[2m > [22m[2mupdateProjectStatus[2m > [22m[2mshould throw error if update fails
[22m[39mupdateProjectStatus failed: Error: DB Error
    at [90m/home/joel/PlanterPlan/PlanterPlan-Alpha/PlanterPlan-Alpha/[39msrc/features/projects/services/projectService.test.js:38:25
    at [90mfile:///home/joel/PlanterPlan/PlanterPlan-Alpha/PlanterPlan-Alpha/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:145:11
    at [90mfile:///home/joel/PlanterPlan/PlanterPlan-Alpha/PlanterPlan-Alpha/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:915:26
    at [90mfile:///home/joel/PlanterPlan/PlanterPlan-Alpha/PlanterPlan-Alpha/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1243:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///home/joel/PlanterPlan/PlanterPlan-Alpha/PlanterPlan-Alpha/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1209:10[90m)[39m
    at [90mfile:///home/joel/PlanterPlan/PlanterPlan-Alpha/PlanterPlan-Alpha/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1653:37
    at Traces.$ [90m(file:///home/joel/PlanterPlan/PlanterPlan-Alpha/PlanterPlan-Alpha/[39mnode_modules/[4mvitest[24m/dist/chunks/traces.CCmnQaNT.js:142:27[90m)[39m
    at trace [90m(file:///home/joel/PlanterPlan/PlanterPlan-Alpha/PlanterPlan-Alpha/[39mnode_modules/[4mvitest[24m/dist/chunks/test.B8ej_ZHS.js:239:21[90m)[39m
    at runTest [90m(file:///home/joel/PlanterPlan/PlanterPlan-Alpha/PlanterPlan-Alpha/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1653:12[90m)[39m

 [32m‚úì[39m src/features/projects/services/projectService.test.js [2m([22m[2m2 tests[22m[2m)[22m[32m 16[2mms[22m[39m
[90mstderr[2m | src/tests/integration/create-project.spec.jsx[2m > [22m[2mIntegration: Project Creation Workflow[2m > [22m[2mshould rollback (delete project) if RPC initialization fails
[22m[39m[ProjectService] RPC Error: { message: [32m'RPC Failed'[39m }

 [32m‚úì[39m src/tests/integration/create-project.spec.jsx [2m([22m[2m3 tests[22m[2m)[22m[32m 15[2mms[22m[39m
[90mstderr[2m | src/tests/integration/golden-paths-mobile.test.jsx[2m > [22m[2mBrowser Verification: Golden Paths (Mobile)[2m > [22m[2mhides sidebar by default and shows Mobile FAB
[22m[39m[PlanterClient] getSession() failed, falling back to localStorage TypeError: __vite_ssr_import_0__.supabase.auth.getSession is not a function
    at getSupabaseToken [90m(/home/joel/PlanterPlan/PlanterPlan-Alpha/PlanterPlan-Alpha/[39msrc/shared/api/planterClient.js:165:55[90m)[39m
    at Object.me [90m(/home/joel/PlanterPlan/PlanterPlan-Alpha/PlanterPlan-Alpha/[39msrc/shared/api/planterClient.js:230:27[90m)[39m
    at queryFn [90m(/home/joel/PlanterPlan/PlanterPlan-Alpha/PlanterPlan-Alpha/[39msrc/features/auth/hooks/useUser.js:7:33[90m)[39m
    at Object.fetchFn [as fn] [90m(file:///home/joel/PlanterPlan/PlanterPlan-Alpha/PlanterPlan-Alpha/[39mnode_modules/[4m@tanstack/query-core[24m/build/modern/query.js:224:14[90m)[39m
    at run [90m(file:///home/joel/PlanterPlan/PlanterPlan-Alpha/PlanterPlan-Alpha/[39mnode_modules/[4m@tanstack/query-core[24m/build/modern/retryer.js:77:49[90m)[39m
    at Object.start [90m(file:///home/joel/PlanterPlan/PlanterPlan-Alpha/PlanterPlan-Alpha/[39mnode_modules/[4m@tanstack/query-core[24m/build/modern/retryer.js:119:9[90m)[39m
    at Query.fetch [90m(file:///home/joel/PlanterPlan/PlanterPlan-Alpha/PlanterPlan-Alpha/[39mnode_modules/[4m@tanstack/query-core[24m/build/modern/query.js:271:40[90m)[39m
    at QueryObserver.#executeFetch [90m(file:///home/joel/PlanterPlan/PlanterPlan-Alpha/PlanterPlan-Alpha/[39mnode_modules/[4m@tanstack/query-core[24m/build/modern/queryObserver.js:179:38[90m)[39m
    at QueryObserver.onSubscribe [90m(file:///home/joel/PlanterPlan/PlanterPlan-Alpha/PlanterPlan-Alpha/[39mnode_modules/[4m@tanstack/query-core[24m/build/modern/queryObserver.js:52:27[90m)[39m
    at QueryObserver.subscribe [90m(file:///home/joel/PlanterPlan/PlanterPlan-Alpha/PlanterPlan-Alpha/[39mnode_modules/[4m@tanstack/query-core[24m/build/modern/subscribable.js:9:10[90m)[39m

 [32m‚úì[39m src/tests/integration/golden-paths-mobile.test.jsx [2m([22m[2m1 test[22m[2m)[22m[33m 434[2mms[22m[39m
     [33m[2m‚úì[22m[39m hides sidebar by default and shows Mobile FAB [33m 432[2mms[22m[39m
 [32m‚úì[39m src/shared/lib/validation.test.js [2m([22m[2m4 tests[22m[2m)[22m[32m 35[2mms[22m[39m
 [32m‚úì[39m src/shared/lib/retry.test.js [2m([22m[2m5 tests[22m[2m)[22m[32m 20[2mms[22m[39m
 [32m‚úì[39m src/features/tasks/hooks/useTaskOperations.test.jsx [2m([22m[2m1 test[22m[2m)[22m[32m 22[2mms[22m[39m
 [32m‚úì[39m src/features/mobile/MobileAgenda.test.jsx [2m([22m[2m3 tests[22m[2m)[22m[32m 90[2mms[22m[39m
[90mstderr[2m | src/tests/unit/TaskService.security.test.js[2m > [22m[2mTaskService Security[2m > [22m[2mShould return error if sortColumn contains malicious SQL
[22m[39m[taskService.getTasksForUser] Error: Error: Invalid sort column format
    at validateSortColumn [90m(/home/joel/PlanterPlan/PlanterPlan-Alpha/PlanterPlan-Alpha/[39msrc/shared/lib/validation.js:36:19[90m)[39m
    at Module.getTasksForUser [90m(/home/joel/PlanterPlan/PlanterPlan-Alpha/PlanterPlan-Alpha/[39msrc/features/tasks/services/taskService.js:53:47[90m)[39m
    at [90m/home/joel/PlanterPlan/PlanterPlan-Alpha/PlanterPlan-Alpha/[39msrc/tests/unit/TaskService.security.test.js:25:30
    at [90mfile:///home/joel/PlanterPlan/PlanterPlan-Alpha/PlanterPlan-Alpha/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:145:11
    at [90mfile:///home/joel/PlanterPlan/PlanterPlan-Alpha/PlanterPlan-Alpha/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:915:26
    at [90mfile:///home/joel/PlanterPlan/PlanterPlan-Alpha/PlanterPlan-Alpha/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1243:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///home/joel/PlanterPlan/PlanterPlan-Alpha/PlanterPlan-Alpha/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1209:10[90m)[39m
    at [90mfile:///home/joel/PlanterPlan/PlanterPlan-Alpha/PlanterPlan-Alpha/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1653:37
    at Traces.$ [90m(file:///home/joel/PlanterPlan/PlanterPlan-Alpha/PlanterPlan-Alpha/[39mnode_modules/[4mvitest[24m/dist/chunks/traces.CCmnQaNT.js:142:27[90m)[39m

 [32m‚úì[39m src/tests/unit/TaskService.security.test.js [2m([22m[2m2 tests[22m[2m)[22m[32m 30[2mms[22m[39m
 [32m‚úì[39m src/features/tasks/services/taskService.test.js [2m([22m[2m2 tests[22m[2m)[22m[32m 6[2mms[22m[39m
 [32m‚úì[39m src/tests/integration/drag-to-assign.test.jsx [2m([22m[2m5 tests[22m[2m)[22m[32m 135[2mms[22m[39m
 [32m‚úì[39m src/tests/unit/XSS.test.jsx [2m([22m[2m3 tests[22m[2m)[22m[32m 127[2mms[22m[39m
 [32m‚úì[39m src/pages/TasksPage.test.jsx [2m([22m[2m3 tests[22m[2m)[22m[32m 207[2mms[22m[39m
[90mstdout[2m | src/shared/api/planterClient.test.js[2m > [22m[2mplanterClient[2m > [22m[2mentities.Task.create[2m > [22m[2mshould post payload to tasks table
[22m[39m[PlanterClient] Creating tasks (Raw Fetch): { title: [32m'New Task'[39m, creator: [32m'u1'[39m }

 [32m‚úì[39m src/shared/api/planterClient.test.js [2m([22m[2m2 tests[22m[2m)[22m[32m 8[2mms[22m[39m
 [32m‚úì[39m src/features/tasks/lib/tree.test.js [2m([22m[2m5 tests[22m[2m)[22m[32m 10[2mms[22m[39m
 [32m‚úì[39m src/shared/lib/date-engine/date-engine-regression.test.js [2m([22m[2m2 tests[22m[2m)[22m[32m 6[2mms[22m[39m
[90mstderr[2m | src/tests/unit/useTaskBoard.rollback.test.jsx[2m > [22m[2museTaskDrag Rollback[2m > [22m[2mshould call commitOptimisticUpdate when drag operation fails
[22m[39mFailed to persist move Error: API Error
    at [90m/home/joel/PlanterPlan/PlanterPlan-Alpha/PlanterPlan-Alpha/[39msrc/tests/unit/useTaskBoard.rollback.test.jsx:94:44
    at [90mfile:///home/joel/PlanterPlan/PlanterPlan-Alpha/PlanterPlan-Alpha/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:145:11
    at [90mfile:///home/joel/PlanterPlan/PlanterPlan-Alpha/PlanterPlan-Alpha/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:915:26
    at [90mfile:///home/joel/PlanterPlan/PlanterPlan-Alpha/PlanterPlan-Alpha/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1243:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///home/joel/PlanterPlan/PlanterPlan-Alpha/PlanterPlan-Alpha/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1209:10[90m)[39m
    at [90mfile:///home/joel/PlanterPlan/PlanterPlan-Alpha/PlanterPlan-Alpha/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1653:37
    at Traces.$ [90m(file:///home/joel/PlanterPlan/PlanterPlan-Alpha/PlanterPlan-Alpha/[39mnode_modules/[4mvitest[24m/dist/chunks/traces.CCmnQaNT.js:142:27[90m)[39m
    at trace [90m(file:///home/joel/PlanterPlan/PlanterPlan-Alpha/PlanterPlan-Alpha/[39mnode_modules/[4mvitest[24m/dist/chunks/test.B8ej_ZHS.js:239:21[90m)[39m
    at runTest [90m(file:///home/joel/PlanterPlan/PlanterPlan-Alpha/PlanterPlan-Alpha/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1653:12[90m)[39m

[90mstderr[2m | src/tests/unit/useTaskBoard.rollback.test.jsx[2m > [22m[2museTaskMutations Rollback[2m > [22m[2mshould call commitOptimisticUpdate when updateTask fails
[22m[39mError updating task: Error: Update Failed
    at [90m/home/joel/PlanterPlan/PlanterPlan-Alpha/PlanterPlan-Alpha/[39msrc/tests/unit/useTaskBoard.rollback.test.jsx:138:65
    at [90mfile:///home/joel/PlanterPlan/PlanterPlan-Alpha/PlanterPlan-Alpha/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:145:11
    at [90mfile:///home/joel/PlanterPlan/PlanterPlan-Alpha/PlanterPlan-Alpha/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:915:26
    at [90mfile:///home/joel/PlanterPlan/PlanterPlan-Alpha/PlanterPlan-Alpha/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1243:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///home/joel/PlanterPlan/PlanterPlan-Alpha/PlanterPlan-Alpha/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1209:10[90m)[39m
    at [90mfile:///home/joel/PlanterPlan/PlanterPlan-Alpha/PlanterPlan-Alpha/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1653:37
    at Traces.$ [90m(file:///home/joel/PlanterPlan/PlanterPlan-Alpha/PlanterPlan-Alpha/[39mnode_modules/[4mvitest[24m/dist/chunks/traces.CCmnQaNT.js:142:27[90m)[39m
    at trace [90m(file:///home/joel/PlanterPlan/PlanterPlan-Alpha/PlanterPlan-Alpha/[39mnode_modules/[4mvitest[24m/dist/chunks/test.B8ej_ZHS.js:239:21[90m)[39m
    at runTest [90m(file:///home/joel/PlanterPlan/PlanterPlan-Alpha/PlanterPlan-Alpha/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1653:12[90m)[39m

 [32m‚úì[39m src/tests/unit/useTaskBoard.rollback.test.jsx [2m([22m[2m2 tests[22m[2m)[22m[32m 34[2mms[22m[39m
[90mstderr[2m | src/tests/unit/dragDropUtils.test.js[2m > [22m[2mdragDropUtils: calculateDropTarget[2m > [22m[2mshould prevent circular dependency (Grandfather Paradox)
[22m[39mCannot drop a parent into its own child (Circular dependency detected)

 [32m‚úì[39m src/tests/unit/dragDropUtils.test.js [2m([22m[2m5 tests[22m[2m)[22m[32m 9[2mms[22m[39m
 [32m‚úì[39m src/features/tasks/services/taskCloneService.test.js [2m([22m[2m3 tests[22m[2m)[22m[32m 8[2mms[22m[39m
 [32m‚úì[39m src/features/projects/services/projectService.permissions.test.js [2m([22m[2m3 tests[22m[2m)[22m[32m 5[2mms[22m[39m
 [32m‚úì[39m src/shared/lib/date-engine/index.test.js [2m([22m[2m5 tests[22m[2m)[22m[32m 8[2mms[22m[39m
 [32m‚úì[39m src/tests/integration/drag-interaction.spec.jsx [2m([22m[2m1 test[22m[2m)[22m[32m 24[2mms[22m[39m
[90mstderr[2m | src/tests/unit/useTaskDrag.rollback.test.js[2m > [22m[2museTaskDrag Rollback[2m > [22m[2mcalls commitOptimisticUpdate (revert) when status update fails
[22m[39mFailed to update status Error: Network Error
    at [90m/home/joel/PlanterPlan/PlanterPlan-Alpha/PlanterPlan-Alpha/[39msrc/tests/unit/useTaskDrag.rollback.test.js:62:48
    at [90mfile:///home/joel/PlanterPlan/PlanterPlan-Alpha/PlanterPlan-Alpha/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:145:11
    at [90mfile:///home/joel/PlanterPlan/PlanterPlan-Alpha/PlanterPlan-Alpha/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:915:26
    at [90mfile:///home/joel/PlanterPlan/PlanterPlan-Alpha/PlanterPlan-Alpha/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1243:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///home/joel/PlanterPlan/PlanterPlan-Alpha/PlanterPlan-Alpha/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1209:10[90m)[39m
    at [90mfile:///home/joel/PlanterPlan/PlanterPlan-Alpha/PlanterPlan-Alpha/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1653:37
    at Traces.$ [90m(file:///home/joel/PlanterPlan/PlanterPlan-Alpha/PlanterPlan-Alpha/[39mnode_modules/[4mvitest[24m/dist/chunks/traces.CCmnQaNT.js:142:27[90m)[39m
    at trace [90m(file:///home/joel/PlanterPlan/PlanterPlan-Alpha/PlanterPlan-Alpha/[39mnode_modules/[4mvitest[24m/dist/chunks/test.B8ej_ZHS.js:239:21[90m)[39m
    at runTest [90m(file:///home/joel/PlanterPlan/PlanterPlan-Alpha/PlanterPlan-Alpha/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1653:12[90m)[39m

 [32m‚úì[39m src/tests/unit/useTaskDrag.rollback.test.js [2m([22m[2m1 test[22m[2m)[22m[32m 26[2mms[22m[39m
 [32m‚úì[39m src/shared/lib/highlightMatches.test.js [2m([22m[2m4 tests[22m[2m)[22m[32m 5[2mms[22m[39m
 [32m‚úì[39m src/tests/unit/positionService.test.js [2m([22m[2m6 tests[22m[2m)[22m[32m 4[2mms[22m[39m
 [32m‚úì[39m src/smoke.test.js [2m([22m[2m1 test[22m[2m)[22m[32m 2[2mms[22m[39m
 [2m[90m‚Üì[39m[22m src/tests/integration/debug_query.test.jsx [2m([22m[2m2 tests[22m[2m | [22m[33m2 skipped[39m[2m)[22m
 [32m‚úì[39m src/test_constants.test.js [2m([22m[2m1 test[22m[2m)[22m[32m 3[2mms[22m[39m
 [32m‚úì[39m src/features/onboarding/components/OnboardingWizard.test.jsx [2m([22m[2m3 tests[22m[2m)[22m[32m 183[2mms[22m[39m
 [32m‚úì[39m src/tests/integration/inline-task-creation.spec.jsx [2m([22m[2m1 test[22m[2m)[22m[32m 77[2mms[22m[39m
 [32m‚úì[39m src/tests/unit/dateInheritance.test.js [2m([22m[2m4 tests[22m[2m)[22m[32m 5[2mms[22m[39m
 [32m‚úì[39m src/features/dashboard/components/CreateProjectModal.test.jsx [2m([22m[2m8 tests[22m[2m)[22m[33m 3134[2mms[22m[39m
       [33m[2m‚úì[22m[39m moves to step 2 when template is selected [33m 438[2mms[22m[39m
       [33m[2m‚úì[22m[39m passes title field correctly to onCreate callback [33m 580[2mms[22m[39m
       [33m[2m‚úì[22m[39m maps template to templateId correctly [33m 536[2mms[22m[39m
       [33m[2m‚úì[22m[39m disables Create button when title is empty [33m 430[2mms[22m[39m
       [33m[2m‚úì[22m[39m enables Create button when title is provided [33m 429[2mms[22m[39m
       [33m[2m‚úì[22m[39m resets form after successful creation [33m 524[2mms[22m[39m

[31m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[39m[1m[41m Failed Suites 1 [49m[22m[31m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[39m

[41m[1m FAIL [22m[49m src/tests/security/RLS.test.js[2m [ src/tests/security/RLS.test.js ][22m
[31m[1mReferenceError[22m: shouldRun is not defined[39m
[36m [2m‚ùØ[22m src/tests/security/RLS.test.js:[2m13:1[22m[39m
    [90m 11| [39mconst hasCredentials = process.env.TEST_USER_EMAIL && process.env.TEST‚Ä¶
    [90m 12| [39m
    [90m 13| [39m[35mif[39m ([33m![39mshouldRun) {
    [90m   | [39m[31m^[39m
    [90m 14| [39m    console.warn('Skipping RLS tests: Missing VITE_SUPABASE_URL or VIT‚Ä¶
    [90m 15| [39m} [35melse[39m [35mif[39m ([33m![39mhasCredentials) {

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[1/1]‚éØ[22m[39m


[2m Test Files [22m [1m[31m1 failed[39m[22m[2m | [22m[1m[32m40 passed[39m[22m[2m | [22m[33m1 skipped[39m[90m (42)[39m
[2m      Tests [22m [1m[32m125 passed[39m[22m[2m | [22m[33m2 skipped[39m[90m (127)[39m
[2m   Start at [22m 12:24:50
[2m   Duration [22m 7.45s[2m (transform 4.51s, setup 2.63s, import 32.27s, tests 6.45s, environment 29.71s)[22m

