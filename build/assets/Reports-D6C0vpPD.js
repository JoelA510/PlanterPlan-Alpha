import{j as e}from"./vendor-react-DX4Lmrvn.js";import{T as i,D as f,c as D,B,C as x,P as v,p}from"./index-Br2Xu7Qm.js";import{a as h}from"./vendor-tanstack-9CpNAsg6.js";import{L as S,A as R,x as A,Z as F,u as O,a7 as _,a8 as $}from"./icons-BEbz6qOW.js";import{B as N,R as y,b as E,X as K,Y as q,T as C,c as I,P as M,a as U,C as z,L as G}from"./charts-K6ic3D2m.js";import{m as g}from"./motion-DvU5AUZF.js";import{L as H}from"./vendor-react-router-ntvFPmC_.js";import"./vendor-cookie-CqkleIqs.js";import"./vendor-react-dom-iPqxPKvx.js";import"./vendor-scheduler-7OC5HNn7.js";import"./vendor-react-error-boundary-DeOyvB-M.js";import"./vendor-prop-types-XtUpdism.js";import"./supabase-BEF00O_b.js";import"./vendor-iceberg-js-tWD4K6Lg.js";import"./vendor-tslib-eMSY344_.js";import"./vendor-dnd-kit-C3P6AmvV.js";import"./ui-DuZtC1Lg.js";import"./vendor-react-remove-scroll-B50KC6RJ.js";import"./vendor-react-remove-scroll-bar-C0UMJRvB.js";import"./vendor-react-style-singleton-BBFmicJf.js";import"./vendor-get-nonce-C-Z93AgS.js";import"./vendor-use-sidecar-B4uuF6YV.js";import"./vendor-use-callback-ref-BFr-fhwT.js";import"./vendor-aria-hidden-DvXkyWUv.js";import"./vendor-floating-ui-CXK3Chmc.js";import"./vendor-use-sync-external-store-WPKLZnYO.js";import"./vendor-class-variance-authority-5VPnzWs2.js";import"./vendor-clsx-B-dksMZM.js";import"./vendor-tailwind-merge-COJ8Fh6m.js";import"./vendor-cmdk-DA2qgqDK.js";import"./vendor-date-fns-BhSCcb1h.js";import"./vendor-react-virtuoso-Co0KQAY-.js";import"./vendor-dompurify-HRjpPm7y.js";import"./vendor-react-day-picker-BIIO-C1e.js";import"./vendor-zod-DtU_CG7Y.js";import"./vendor-motion-dom-CcLe_LtT.js";import"./vendor-motion-utils-CYU-yiCP.js";import"./vendor-es-toolkit-mKl5r5TH.js";import"./vendor-reselect-Cg9BXdu5.js";import"./vendor-react-is-6X3Tk9W0.js";import"./vendor-tiny-invariant-BaFNuDhB.js";import"./vendor-d3-shape-D615ovhT.js";import"./vendor-d3-path-CimkQT29.js";import"./vendor-reduxjs-DBDgQSyU.js";import"./vendor-redux-BXkGT1VS.js";import"./vendor-redux-thunk-ClJT1hhx.js";import"./vendor-react-redux-DFMTQxz_.js";import"./vendor-immer-B82CE1ke.js";import"./vendor-victory-vendor-BJmk5oAg.js";import"./vendor-d3-scale-D4oPfGQv.js";import"./vendor-internmap-BkD7Hj8s.js";import"./vendor-d3-array-g_qRI3rN.js";import"./vendor-d3-time-format-Dzsv3U5k.js";import"./vendor-d3-time-CD8iKzkK.js";import"./vendor-d3-interpolate-BPXZzoDY.js";import"./vendor-d3-color-9lF95FHy.js";import"./vendor-d3-format-CzD4bSOQ.js";import"./vendor-decimal.js-light-DQE-3iDJ.js";import"./vendor-eventemitter3-Cpu8i4ki.js";const w=["#0088FE","#00C49F","#FFBB28","#FF8042"],d={projectProgress:[{name:"Alpha",progress:75},{name:"Beta",progress:45},{name:"Gamma",progress:90}],taskDistribution:[{name:"To Do",value:10},{name:"In Progress",value:20},{name:"Done",value:30}],upcomingDeadlines:[{id:1,title:"Launch",project:"Alpha",date:"2023-10-01",priority:"High"},{id:2,title:"Test",project:"Beta",date:"2023-10-05",priority:"Medium"}]};function es(){const r=new URLSearchParams(window.location.search).get("project"),{data:b}=h({queryKey:["project",r],queryFn:()=>p.entities.Project.filter({id:r}).then(s=>s[0]),enabled:!!r}),{data:k=[]}=h({queryKey:["phases",r],queryFn:()=>p.entities.Phase.filter({root_id:r}),enabled:!!r}),{data:a=[],isLoading:P}=h({queryKey:["tasks",r],queryFn:()=>p.entities.Task.filter({root_id:r}),enabled:!!r}),o={completed:a.filter(s=>s.status===i.COMPLETED).length,in_progress:a.filter(s=>s.status===i.IN_PROGRESS).length,not_started:a.filter(s=>s.status===i.TODO).length,blocked:a.filter(s=>s.status===i.BLOCKED).length},L=[{label:"Completed",value:o.completed,icon:A,borderClass:"border-green-200",bgClass:"bg-green-100",hoverBgClass:"bg-green-500",textClass:"text-green-600"},{label:"In Progress",value:o.in_progress,icon:F,borderClass:"border-orange-200",bgClass:"bg-orange-100",hoverBgClass:"bg-orange-500",textClass:"text-orange-600"},{label:"Not Started",value:o.not_started,icon:O,borderClass:"border-indigo-200",bgClass:"bg-indigo-100",hoverBgClass:"bg-indigo-500",textClass:"text-indigo-600"},{label:"Blocked",value:o.blocked,icon:_,borderClass:"border-red-200",bgClass:"bg-red-100",hoverBgClass:"bg-red-500",textClass:"text-red-600"}],T=[...k].sort((s,t)=>s.order-t.order).map(s=>{const t=a.filter(m=>m.phase_id===s.id),c=t.filter(m=>m.status===i.COMPLETED).length,l=t.length;return{name:`Phase ${s.order}`,fullName:s.name,completed:c,remaining:l-c,total:l,progress:l>0?Math.round(c/l*100):0}}),n=a.length,u=o.completed,j=n>0?Math.round(u/n*100):0;return P?e.jsx(f,{children:e.jsx("div",{className:"flex justify-center py-20",children:e.jsx(S,{className:"w-8 h-8 animate-spin text-orange-500"})})}):e.jsx(f,{selectedTaskId:r,children:e.jsxs("div",{className:"min-h-screen bg-slate-50",children:[e.jsx("div",{className:"bg-white border-b border-slate-200 shadow-sm",children:e.jsx("div",{className:"max-w-6xl mx-auto px-4 py-8",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(H,{to:D(`Project?id=${r}`),children:e.jsx(B,{variant:"ghost",size:"icon",className:"rounded-full hover:bg-slate-100",children:e.jsx(R,{className:"w-5 h-5"})})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-slate-900 tracking-tight",children:"Reports & Analytics"}),b&&e.jsx("p",{className:"text-slate-600 mt-1",children:b.name})]})]})})}),e.jsx("div",{className:"max-w-6xl mx-auto px-4 py-8",children:r?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-6 mb-10",children:L.map((s,t)=>e.jsx(g.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:t*.1},children:e.jsx(x,{className:`p-6 border border-slate-200 bg-white shadow-sm hover:shadow-lg transition-all duration-300 group hover:${s.borderClass}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider mb-2",children:s.label}),e.jsx("p",{className:"text-3xl font-bold text-slate-900",children:s.value})]}),e.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center transition-colors ${s.bgClass} group-hover:${s.hoverBgClass}`,children:e.jsx(s.icon,{className:`w-6 h-6 transition-colors ${s.textClass} group-hover:text-white`})})]})})},s.label))}),e.jsx(g.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},children:e.jsxs(x,{className:"p-8 mb-10 border border-slate-200 bg-gradient-to-br from-white to-slate-50 shadow-md hover:shadow-xl transition-all duration-300",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-foreground",children:"Overall Progress"}),e.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:[u," of ",n," tasks completed"]})]}),e.jsxs("div",{className:"flex items-center gap-3 px-4 py-2 bg-green-50 rounded-xl border border-green-200",children:[e.jsx($,{className:"w-5 h-5 text-green-600"}),e.jsxs("span",{className:"text-2xl font-bold text-green-700",children:[j,"%"]})]})]}),e.jsx(v,{value:j,className:"h-3 bg-border"})]})}),e.jsxs("div",{className:"bg-card rounded-xl shadow-sm border border-border p-6 mb-8",children:[e.jsx("h2",{className:"text-lg font-semibold text-foreground mb-4",children:"Project Overview"}),e.jsx("div",{className:"h-64",children:e.jsx(y,{width:"100%",height:"100%",children:e.jsxs(N,{data:d.projectProgress,children:[e.jsx(E,{strokeDasharray:"3 3",vertical:!1,stroke:"hsl(var(--border))"}),e.jsx(K,{dataKey:"name",stroke:"hsl(var(--muted-foreground))",fontSize:12,tickLine:!1,axisLine:!1}),e.jsx(q,{stroke:"hsl(var(--muted-foreground))",fontSize:12,tickLine:!1,axisLine:!1,tickFormatter:s=>`${s}%`}),e.jsx(C,{cursor:{fill:"hsl(var(--muted))",opacity:.4},contentStyle:{backgroundColor:"hsl(var(--card))",borderColor:"hsl(var(--border))",borderRadius:"8px"}}),e.jsx(I,{dataKey:"progress",fill:"hsl(var(--primary))",radius:[4,4,0,0]})]})})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"bg-card rounded-xl shadow-sm border border-border p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-foreground mb-4",children:"Task Status Distribution"}),e.jsx("div",{className:"h-64",children:e.jsx(y,{width:"100%",height:"100%",children:e.jsxs(M,{children:[e.jsx(U,{data:d.taskDistribution,cx:"50%",cy:"50%",innerRadius:60,outerRadius:80,paddingAngle:5,dataKey:"value",children:d.taskDistribution.map((s,t)=>e.jsx(z,{fill:w[t%w.length]},`cell-${t}`))}),e.jsx(C,{contentStyle:{backgroundColor:"hsl(var(--card))",borderColor:"hsl(var(--border))",borderRadius:"8px"}}),e.jsx(G,{})]})})})]}),e.jsxs("div",{className:"bg-card rounded-xl shadow-sm border border-border p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-foreground mb-4",children:"Upcoming Deadlines"}),e.jsx("div",{className:"space-y-4",children:d.upcomingDeadlines.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted rounded-lg border border-border",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-foreground",children:s.title}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.project})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm font-medium text-orange-600 dark:text-orange-400",children:s.date}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${s.priority==="High"?"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400":"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400"}`,children:s.priority})]})]},s.id))})]})]}),e.jsx(g.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.7},className:"mt-8",children:e.jsxs(x,{className:"p-8 border border-border bg-card shadow-lg",children:[e.jsx("h3",{className:"text-xl font-bold text-foreground mb-8",children:"Phase Details"}),e.jsx("div",{className:"space-y-6",children:T.map((s,t)=>e.jsxs("div",{className:"p-4 rounded-xl border border-border hover:border-orange-200 hover:bg-accent transition-all duration-300",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-3",children:[e.jsx("div",{className:"w-24 text-sm font-semibold text-foreground",children:s.name}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-foreground mb-2",children:s.fullName}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(v,{value:s.progress,className:"h-2.5 flex-1 bg-border"}),e.jsxs("span",{className:"text-sm font-bold text-orange-600 w-14 text-right",children:[s.progress,"%"]})]})]})]}),e.jsxs("p",{className:"text-xs text-muted-foreground ml-28",children:[s.completed," of ",s.total," tasks completed"]})]},t))})]})})]}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-20 bg-white rounded-2xl border border-dashed border-slate-300",children:[e.jsx("div",{className:"w-16 h-16 bg-slate-50 rounded-2xl flex items-center justify-center mb-4",children:e.jsx(N,{className:"w-8 h-8 text-slate-400"})}),e.jsx("h3",{className:"text-xl font-bold text-slate-900",children:"Select a Project"}),e.jsx("p",{className:"text-slate-500 max-w-sm text-center mt-2",children:"Please select a project from the sidebar to view its detailed reports and analytics."})]})})]})})}export{es as default};
