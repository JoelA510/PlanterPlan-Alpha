import{r as n,j as e}from"./vendor-react-DX4Lmrvn.js";import{a as x,u as v,b as j,D as y,B as h,L as l,I as i,p as N}from"./index-Br2Xu7Qm.js";import{Y as g,Z as _}from"./ui-DuZtC1Lg.js";import{H as f,a9 as w,o as k,L as S}from"./icons-BEbz6qOW.js";import{m as C}from"./motion-DvU5AUZF.js";import"./vendor-cookie-CqkleIqs.js";import"./vendor-react-dom-iPqxPKvx.js";import"./vendor-scheduler-7OC5HNn7.js";import"./vendor-react-error-boundary-DeOyvB-M.js";import"./vendor-prop-types-XtUpdism.js";import"./supabase-BEF00O_b.js";import"./vendor-iceberg-js-tWD4K6Lg.js";import"./vendor-tslib-eMSY344_.js";import"./vendor-react-router-ntvFPmC_.js";import"./vendor-dnd-kit-C3P6AmvV.js";import"./vendor-class-variance-authority-5VPnzWs2.js";import"./vendor-clsx-B-dksMZM.js";import"./vendor-tailwind-merge-COJ8Fh6m.js";import"./vendor-cmdk-DA2qgqDK.js";import"./vendor-tanstack-9CpNAsg6.js";import"./vendor-date-fns-BhSCcb1h.js";import"./vendor-react-virtuoso-Co0KQAY-.js";import"./vendor-dompurify-HRjpPm7y.js";import"./charts-K6ic3D2m.js";import"./vendor-es-toolkit-mKl5r5TH.js";import"./vendor-reselect-Cg9BXdu5.js";import"./vendor-react-is-6X3Tk9W0.js";import"./vendor-tiny-invariant-BaFNuDhB.js";import"./vendor-d3-shape-D615ovhT.js";import"./vendor-d3-path-CimkQT29.js";import"./vendor-reduxjs-DBDgQSyU.js";import"./vendor-redux-BXkGT1VS.js";import"./vendor-redux-thunk-ClJT1hhx.js";import"./vendor-react-redux-DFMTQxz_.js";import"./vendor-use-sync-external-store-WPKLZnYO.js";import"./vendor-immer-B82CE1ke.js";import"./vendor-victory-vendor-BJmk5oAg.js";import"./vendor-d3-scale-D4oPfGQv.js";import"./vendor-internmap-BkD7Hj8s.js";import"./vendor-d3-array-g_qRI3rN.js";import"./vendor-d3-time-format-Dzsv3U5k.js";import"./vendor-d3-time-CD8iKzkK.js";import"./vendor-d3-interpolate-BPXZzoDY.js";import"./vendor-d3-color-9lF95FHy.js";import"./vendor-d3-format-CzD4bSOQ.js";import"./vendor-decimal.js-light-DQE-3iDJ.js";import"./vendor-eventemitter3-Cpu8i4ki.js";import"./vendor-react-day-picker-BIIO-C1e.js";import"./vendor-zod-DtU_CG7Y.js";import"./vendor-motion-dom-CcLe_LtT.js";import"./vendor-motion-utils-CYU-yiCP.js";import"./vendor-react-remove-scroll-B50KC6RJ.js";import"./vendor-react-remove-scroll-bar-C0UMJRvB.js";import"./vendor-react-style-singleton-BBFmicJf.js";import"./vendor-get-nonce-C-Z93AgS.js";import"./vendor-use-sidecar-B4uuF6YV.js";import"./vendor-use-callback-ref-BFr-fhwT.js";import"./vendor-aria-hidden-DvXkyWUv.js";import"./vendor-floating-ui-CXK3Chmc.js";const b=n.forwardRef(({className:t,...d},c)=>e.jsx(g,{className:x("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...d,ref:c,children:e.jsx(_,{className:x("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})}));b.displayName=g.displayName;function Fe(){const{user:t}=v(),{toast:d}=j(),[c,u]=n.useState(!1),[o,m]=n.useState(""),[r,s]=n.useState({full_name:"",email:"",role:"",organization:"",avatar_url:"",email_frequency:"weekly"});n.useEffect(()=>{t&&s({full_name:t.user_metadata?.full_name||"",email:t.email||"",role:t.user_metadata?.role||"",organization:t.user_metadata?.organization||"",avatar_url:t.user_metadata?.avatar_url||"",email_frequency:t.user_metadata?.email_frequency||"daily"})},[t]);const p=async()=>{if(!o){u(!0);try{await N.auth.updateProfile({full_name:r.full_name,role:r.role,organization:r.organization,avatar_url:r.avatar_url,email_frequency:r.email_frequency}),d({title:"Settings saved",description:"Your profile has been updated successfully."})}catch(a){console.error("Error updating profile:",a),d({title:"Error",description:"Failed to update settings. Please try again.",variant:"destructive"})}finally{u(!1)}}};return e.jsx(y,{children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground tracking-tight",children:"Settings"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Manage your account and app preferences"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[e.jsx("div",{className:"md:col-span-1 space-y-1",children:[{label:"Profile",icon:f,active:!0},{label:"Notifications",icon:w,comingSoon:!0},{label:"Security",icon:k,comingSoon:!0}].map(a=>e.jsxs(h,{variant:"ghost",disabled:a.comingSoon,className:`w-full justify-start ${a.active?"text-brand-600 bg-brand-50 dark:bg-brand-950/20 dark:text-brand-400 font-semibold":"text-muted-foreground"} ${a.comingSoon?"cursor-not-allowed opacity-70":"hover:text-foreground hover:bg-muted"}`,children:[e.jsx(a.icon,{className:"w-4 h-4 mr-2"}),a.label,a.comingSoon&&e.jsx("span",{className:"ml-auto text-xs bg-muted text-muted-foreground px-1.5 py-0.5 rounded",children:"Soon"})]},a.label))}),e.jsx("div",{className:"md:col-span-3",children:e.jsx(C.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:e.jsxs("div",{className:"bg-card rounded-xl border border-border shadow-sm p-6",children:[e.jsxs("div",{className:"flex items-center gap-6 mb-8",children:[e.jsx("div",{className:"relative",children:e.jsx("div",{className:"w-24 h-24 bg-secondary rounded-2xl flex items-center justify-center border-2 border-background shadow-md overflow-hidden",children:r.avatar_url?e.jsx("img",{src:r.avatar_url,alt:"Profile",className:"w-full h-full object-cover"}):e.jsx(f,{className:"w-10 h-10 text-muted-foreground"})})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Personal Info"}),e.jsx("p",{className:"text-sm text-slate-500",children:"Update your photo and personal details."}),e.jsx("h2",{className:"text-xl font-bold text-foreground",children:"Personal Info"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Update your photo and personal details."})]})]}),e.jsxs("form",{onSubmit:p,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"full_name",className:"text-foreground",children:"Full Name"}),e.jsx(i,{id:"full_name",value:r.full_name,onChange:a=>s({...r,full_name:a.target.value}),className:"mt-1 bg-background border-border"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"email",children:"Email Address"}),e.jsx(i,{id:"email",type:"email",value:r.email,disabled:!0,className:"bg-slate-50 border-slate-200"})]})]}),e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsx(l,{htmlFor:"avatar_url",className:"text-foreground",children:"Avatar URL"}),e.jsx(i,{id:"avatar_url",value:r.avatar_url,onChange:a=>{s({...r,avatar_url:a.target.value}),o&&m("")},onBlur:()=>{r.avatar_url&&!r.avatar_url.match(/^https?:\/\/.+/)?m("Please enter a valid URL (https://...)"):m("")},className:`mt-1 bg-background border-border ${o?"border-destructive focus:ring-destructive":""}`,placeholder:"https://example.com/avatar.jpg"}),o&&e.jsx("p",{className:"text-xs text-destructive",children:o})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"role",children:"Role"}),e.jsx(i,{id:"role",value:r.role,onChange:a=>s({...r,role:a.target.value}),placeholder:"e.g. Lead Planter",className:"border-slate-200 focus:ring-orange-500/20 focus:border-orange-500"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"org",children:"Organization/Church"}),e.jsx(i,{id:"org",value:r.organization,onChange:a=>s({...r,organization:a.target.value}),placeholder:"e.g. Hope City Church",className:"border-slate-200 focus:ring-orange-500/20 focus:border-orange-500"})]})]}),e.jsxs("div",{className:"pt-6 border-t border-border",children:[e.jsx("h3",{className:"text-sm font-medium text-foreground mb-4",children:"Email Preferences"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-foreground",children:"Weekly Digest"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Get a summary of your tasks every Monday"})]}),e.jsx(b,{checked:r.email_frequency==="weekly",onCheckedChange:a=>s({...r,email_frequency:a?"weekly":"never"})})]})]}),e.jsx("div",{className:"pt-6 border-t border-border flex justify-end",children:e.jsxs(h,{onClick:p,disabled:c,className:"bg-brand-600 hover:bg-brand-700 text-white",children:[c&&e.jsx(S,{className:"mr-2 h-4 w-4 animate-spin"}),"Save Changes"]})})]})]})})})]})]})})}export{Fe as default};
